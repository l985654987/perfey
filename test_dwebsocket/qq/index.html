<html><head>    <meta http-equiv="Content-Type" content="text/html; charset=gb2312"/>    <title>对话框</title>    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.1.2/css/bootstrap.min.css" rel="stylesheet">    <link rel="stylesheet" type="text/css" href="css/chat.css"/>    <!--[if lt IE 7]><script src="js/IE7.js" type="text/javascript"></script><![endif]-->    <!--[if IE 6]><script src="js/iepng.js" type="text/javascript"></script><script type="text/javascript">EvPNG.fix('body, div, ul, img, li, input, a, span ,label');</script><![endif]--></head><body class="keBody" style="width: 100%"><div class="kePublic row" style="margin: 0">    <!--效果html开始-->    <div class="col-md-3">        <p style="color: #980c10">输入用户名后才可发言</p>        用户名:<input type="text" id="username">        <button onclick="open_ws()">连接服务器</button>    </div>    <div class="content col-md-9">        <div class="chatBox">            <div class="chatLeft">                <div class="chat01">                    <div class="chat01_title">                    </div>                    <div class="chat01_content" id="chat" style="font:20px">                        <div class="message_box mes1">                        </div>                        <div class="message_box mes2">                        </div>                        <div class="message_box mes3" style="display: block;">                        </div>                        <div class="message_box mes4">                        </div>                        <div class="message_box mes5">                        </div>                        <div class="message_box mes6">                        </div>                        <div class="message_box mes7">                        </div>                        <div class="message_box mes8">                        </div>                        <div class="message_box mes9">                        </div>                        <div class="message_box mes10">                        </div>                    </div>                </div>                <div class="chat02">                    <div class="chat02_title">                        <div class="wl_faces_box">                            <div class="wl_faces_content">                                <div class="title">                                    <ul>                                        <li class="title_name">常用表情</li>                                        <li class="wl_faces_close"><span>&nbsp;</span></li>                                    </ul>                                </div>                                <div class="wl_faces_main">                                    <ul>                                        <li><a href="javascript:;">                                            <img src="img/emo_01.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_02.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_03.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_04.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_05.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_06.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_07.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_08.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_09.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_10.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_11.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_12.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_13.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_14.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_15.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_16.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_17.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_18.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_19.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_20.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_21.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_22.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_23.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_24.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_25.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_26.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_27.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_28.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_29.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_30.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_31.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_32.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_33.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_34.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_35.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_36.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_37.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_38.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_39.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_40.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_41.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_42.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_43.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_44.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_45.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_46.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_47.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_48.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_49.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_50.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_51.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_52.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_53.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_54.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_55.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_56.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_57.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_58.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_59.gif"/></a></li>                                        <li><a href="javascript:;">                                            <img src="img/emo_60.gif"/></a></li>                                    </ul>                                </div>                            </div>                            <div class="wlf_icon">                            </div>                        </div>                    </div>                    <div class="chat02_content">                        <textarea id="textarea"></textarea>                    </div>                    <div class="chat02_bar">                        <ul>                            <li style="right: 5px; top: 5px;"><a href="javascript:;">                                <button onclick="send_msg()">发送</button>                            </a></li>                        </ul>                    </div>                </div>            </div>            <div class="chatRight">                <div class="chat03">                    <div class="chat03_title">                        <label class="chat03_title_t">                            成员列表</label>                    </div>                    <div class="chat03_content">                        <ul id="user_list">                            <li>默认群聊,勾选单个成员为私聊</li>                        </ul>                    </div>                </div>            </div>            <div style="clear: both;">            </div>        </div>    </div>    <!--效果html结束--></div></body><script>    var ws = null;    function open_ws() {        var username = document.getElementById('username').value;        ws = new WebSocket('ws://127.0.0.1:8000/ws/' + username);        ws.onmessage = function (data) {            var msg = JSON.parse(data.data);            if (!msg.msg) {                $('#user_list').empty()                for (var i = 0; i < msg.length; i++) {                    var litag = document.createElement('li');                    //console.log(msg[i])                    litag.innerHTML = `<input type="checkbox" name="hobby" value=${msg[i]} style="margin-left: 10px;color: blue;">${msg[i]} </input> `;                    document.getElementById('user_list').appendChild(litag)                }            } else {                var ptag = document.createElement('p');                ptag.innerText = msg.from_user + ' : ' + msg.msg;                document.getElementById('chat').appendChild(ptag);            }        }    }    function send_msg() {        var user_list = $("input[type='checkbox']")        for (var i = 0; i < user_list.length; i++) {            console.log(user_list[i])            if($(user_list[i]).is(':checked')){                    var to_user = $(user_list[i]).attr('value');            };        }        //console.log($("input[type='checkbox']"))        //if($("input[type='checkbox']").is(':checked')){        //    console.log(111111,$("input[type='checkbox']").attr('value'));       // }        var msg = document.getElementById('textarea').value;        //var to_user = document.getElementById('to_user').value;        var send_obj = {"to_user": to_user, "msg": msg};        var ptag = document.createElement('p');        ptag.innerHTML = `<span style="margin-left: 100px;color: blue" >${msg}</span>`        document.getElementById('chat').appendChild(ptag)        ws.send(JSON.stringify(send_obj));    }</script></html>